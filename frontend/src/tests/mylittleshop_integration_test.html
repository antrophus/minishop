<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ›’ MyLittleShop í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£ŒíŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.1)"><polygon points="0,0 1000,0 1000,60 500,100 0,60"/></svg>');
            background-size: cover;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .content {
            padding: 30px;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        
        .status-card.success {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .status-card.warning {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
        }
        
        .status-card.error {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
        }
        
        .status-icon {
            font-size: 3em;
            margin-bottom: 15px;
            display: block;
        }
        
        .status-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2d3436;
        }
        
        .status-desc {
            color: #636e72;
            line-height: 1.5;
        }
        
        .test-controls {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            color: white;
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .control-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .control-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .control-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .btn.primary {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        }
        
        .btn.secondary {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }
        
        .btn.success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        }
        
        .test-output {
            background: #1e1e1e;
            color: #f8f8f2;
            border-radius: 15px;
            padding: 25px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            max-height: 500px;
            overflow-y: auto;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        
        .test-output::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            border-radius: 15px 15px 0 0;
        }
        
        .log-entry {
            margin-bottom: 8px;
            padding: 5px 0;
            border-left: 3px solid transparent;
            padding-left: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        .log-success {
            color: #50fa7b;
            border-left-color: #50fa7b;
        }
        
        .log-error {
            color: #ff5555;
            border-left-color: #ff5555;
        }
        
        .log-warning {
            color: #f1fa8c;
            border-left-color: #f1fa8c;
        }
        
        .log-info {
            color: #8be9fd;
            border-left-color: #8be9fd;
        }
        
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            height: 8px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            border-radius: 10px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .testing {
            animation: pulse 2s infinite;
        }
        
        .success-celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: fall 3s linear infinite;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
            
            .status-grid,
            .controls-grid,
            .button-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›’ MyLittleShop</h1>
            <div class="subtitle">ì¥ë°”êµ¬ë‹ˆ & ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í†µí•© í…ŒìŠ¤íŠ¸</div>
        </div>
        
        <div class="content">
            <div class="status-grid">
                <div class="status-card" id="serverStatus">
                    <div class="status-icon">ğŸŒ</div>
                    <div class="status-title">ì„œë²„ ìƒíƒœ</div>
                    <div class="status-desc">ì—°ê²° í™•ì¸ ì¤‘...</div>
                </div>
                
                <div class="status-card" id="cartStatus">
                    <div class="status-icon">ğŸ›’</div>
                    <div class="status-title">ì¥ë°”êµ¬ë‹ˆ API</div>
                    <div class="status-desc">ëŒ€ê¸° ì¤‘</div>
                </div>
                
                <div class="status-card" id="wishlistStatus">
                    <div class="status-icon">â¤ï¸</div>
                    <div class="status-title">ìœ„ì‹œë¦¬ìŠ¤íŠ¸ API</div>
                    <div class="status-desc">ëŒ€ê¸° ì¤‘</div>
                </div>
                
                <div class="status-card" id="overallStatus">
                    <div class="status-icon">ğŸ“Š</div>
                    <div class="status-title">ì „ì²´ ì§„í–‰ë¥ </div>
                    <div class="status-desc">0%</div>
                </div>
            </div>
            
            <div class="test-controls">
                <h3>ğŸ”§ í…ŒìŠ¤íŠ¸ ì„¤ì •</h3>
                <div class="controls-grid">
                    <div class="control-group">
                        <label for="userId">ì‚¬ìš©ì ID</label>
                        <input type="number" id="userId" value="1" min="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="baseUrl">API ë² ì´ìŠ¤ URL</label>
                        <input type="url" id="baseUrl" value="http://localhost:8080/api">
                    </div>
                    
                    <div class="control-group">
                        <label for="productIds">í…ŒìŠ¤íŠ¸ ìƒí’ˆ IDë“¤</label>
                        <input type="text" id="productIds" value="1,2,3" placeholder="ì½¤ë§ˆë¡œ êµ¬ë¶„">
                    </div>
                    
                    <div class="control-group">
                        <label for="timeout">íƒ€ì„ì•„ì›ƒ (ms)</label>
                        <input type="number" id="timeout" value="5000" min="1000">
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <div class="button-grid">
                    <button class="btn primary" onclick="runFullTest()">
                        ğŸš€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                    </button>
                    
                    <button class="btn secondary" onclick="runServerTest()">
                        ğŸ“¡ ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸
                    </button>
                    
                    <button class="btn secondary" onclick="runCartTest()">
                        ğŸ›’ ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸
                    </button>
                    
                    <button class="btn secondary" onclick="runWishlistTest()">
                        â¤ï¸ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸
                    </button>
                    
                    <button class="btn success" onclick="clearOutput()">
                        ğŸ§¹ ì¶œë ¥ ì§€ìš°ê¸°
                    </button>
                </div>
            </div>
            
            <div class="test-output" id="testOutput">
                <div class="log-info">ğŸ’¡ MyLittleShop í†µí•© í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                <div class="log-info">ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ì— ë°±ì—”ë“œ ì„œë²„(localhost:8080)ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.</div>
                <div class="log-info">ğŸ”§ ì„¤ì •ì„ í™•ì¸í•˜ê³  "ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</div>
            </div>
        </div>
    </div>
    
    <div class="success-celebration" id="celebration" style="display: none;"></div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let testProgress = 0;
        let totalTests = 15;
        let currentTestResults = {
            server: false,
            cart: false,
            wishlist: false
        };

        // ë¡œê·¸ ê¸°ëŠ¥
        function log(message, type = 'info', showTime = true) {
            const outputElement = document.getElementById('testOutput');
            const timestamp = showTime ? `[${new Date().toLocaleTimeString()}] ` : '';
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `${timestamp}${message}`;
            outputElement.appendChild(logEntry);
            outputElement.scrollTop = outputElement.scrollHeight;
        }

        function clearOutput() {
            const outputElement = document.getElementById('testOutput');
            outputElement.innerHTML = `
                <div class="log-info">ğŸ’¡ ì¶œë ¥ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                <div class="log-info">ğŸ”§ ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
            `;
            updateProgress(0);
            resetStatusCards();
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress(percentage) {
            const progressBar = document.getElementById('progressBar');
            const overallStatus = document.getElementById('overallStatus');
            
            progressBar.style.width = `${percentage}%`;
            overallStatus.querySelector('.status-desc').textContent = `${Math.round(percentage)}%`;
            
            if (percentage === 100) {
                overallStatus.className = 'status-card success';
                showCelebration();
            } else if (percentage > 0) {
                overallStatus.className = 'status-card';
            }
        }

        // ìƒíƒœ ì¹´ë“œ ì—…ë°ì´íŠ¸
        function updateStatusCard(cardId, status, message) {
            const card = document.getElementById(cardId);
            const statusClasses = {
                success: 'status-card success',
                error: 'status-card error',
                warning: 'status-card warning',
                loading: 'status-card testing'
            };
            
            card.className = statusClasses[status] || 'status-card';
            card.querySelector('.status-desc').textContent = message;
            
            currentTestResults[cardId.replace('Status', '')] = (status === 'success');
        }

        function resetStatusCards() {
            updateStatusCard('serverStatus', '', 'ì—°ê²° í™•ì¸ ì¤‘...');
            updateStatusCard('cartStatus', '', 'ëŒ€ê¸° ì¤‘');
            updateStatusCard('wishlistStatus', '', 'ëŒ€ê¸° ì¤‘');
            currentTestResults = { server: false, cart: false, wishlist: false };
        }

        // ì¶•í•˜ ì• ë‹ˆë©”ì´ì…˜
        function showCelebration() {
            const celebration = document.getElementById('celebration');
            celebration.style.display = 'block';
            
            // ì»¨í˜í‹° ìƒì„±
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = getRandomColor();
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    celebration.appendChild(confetti);
                    
                    setTimeout(() => {
                        if (confetti.parentNode) {
                            confetti.parentNode.removeChild(confetti);
                        }
                    }, 3000);
                }, i * 50);
            }
            
            setTimeout(() => {
                celebration.style.display = 'none';
            }, 4000);
        }

        function getRandomColor() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#fd79a8'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // ì„¤ì • ì½ê¸°
        function getTestConfig() {
            return {
                userId: parseInt(document.getElementById('userId').value),
                productIds: document.getElementById('productIds').value.split(',').map(id => parseInt(id.trim())),
                baseUrl: document.getElementById('baseUrl').value,
                timeout: parseInt(document.getElementById('timeout').value)
            };
        }

        // API í˜¸ì¶œ í•¨ìˆ˜ë“¤
        async function apiCall(url, options = {}) {
            const config = getTestConfig();
            const controller = new AbortController();
            
            setTimeout(() => controller.abort(), config.timeout);
            
            try {
                const response = await fetch(url, {
                    ...options,
                    signal: controller.signal
                });
                
                return {
                    ok: response.ok,
                    status: response.status,
                    data: response.ok ? await response.json() : null,
                    error: response.ok ? null : `HTTP ${response.status}`
                };
            } catch (error) {
                if (error.name === 'AbortError') {
                    return { ok: false, error: 'íƒ€ì„ì•„ì›ƒ' };
                }
                return { ok: false, error: error.message };
            }
        }

        // ê°œë³„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        async function runServerTest() {
            log('ğŸŒ ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            updateStatusCard('serverStatus', 'loading', 'ì—°ê²° í™•ì¸ ì¤‘...');
            
            const config = getTestConfig();
            const result = await apiCall(`${config.baseUrl}/products`);
            
            if (result.ok) {
                log('âœ… ì„œë²„ ì—°ê²° ì„±ê³µ!', 'success');
                log(`ğŸ“Š ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ (${result.data?.data?.products?.length || 0}ê°œ ìƒí’ˆ)`, 'info');
                updateStatusCard('serverStatus', 'success', 'ì—°ê²° ì„±ê³µ');
                return true;
            } else {
                log(`âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ${result.error}`, 'error');
                updateStatusCard('serverStatus', 'error', 'ì—°ê²° ì‹¤íŒ¨');
                return false;
            }
        }

        async function runCartTest() {
            log('ğŸ›’ ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            updateStatusCard('cartStatus', 'loading', 'í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...');
            
            const config = getTestConfig();
            let testsPassed = 0;
            const totalCartTests = 5;
            
            try {
                // 1. ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ
                log('1ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ í…ŒìŠ¤íŠ¸...', 'info');
                const cartResult = await apiCall(`${config.baseUrl}/cart/${config.userId}`);
                
                if (cartResult.ok) {
                    log(`âœ… ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ ì„±ê³µ (${cartResult.data?.length || 0}ê°œ ì•„ì´í…œ)`, 'success');
                    testsPassed++;
                } else {
                    log(`âŒ ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ ì‹¤íŒ¨: ${cartResult.error}`, 'error');
                }
                
                updateProgress((testsPassed / totalCartTests) * 30);
                
                // 2. ìƒí’ˆ ì¶”ê°€
                log('2ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆ ì¶”ê°€ í…ŒìŠ¤íŠ¸...', 'info');
                const addResult = await apiCall(`${config.baseUrl}/cart/${config.userId}/items`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ productId: config.productIds[0], quantity: 2 })
                });
                
                if (addResult.ok) {
                    log(`âœ… ìƒí’ˆ ì¶”ê°€ ì„±ê³µ (ID: ${addResult.data?.id})`, 'success');
                    testsPassed++;
                    
                    // 3. ìˆ˜ëŸ‰ ìˆ˜ì • (ì¶”ê°€ëœ ì•„ì´í…œì´ ìˆëŠ” ê²½ìš°)
                    if (addResult.data?.id) {
                        log('3ï¸âƒ£ ìˆ˜ëŸ‰ ìˆ˜ì • í…ŒìŠ¤íŠ¸...', 'info');
                        const updateResult = await apiCall(`${config.baseUrl}/cart/items/${addResult.data.id}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ quantity: 5 })
                        });
                        
                        if (updateResult.ok) {
                            log('âœ… ìˆ˜ëŸ‰ ìˆ˜ì • ì„±ê³µ', 'success');
                            testsPassed++;
                        } else {
                            log(`âŒ ìˆ˜ëŸ‰ ìˆ˜ì • ì‹¤íŒ¨: ${updateResult.error}`, 'error');
                        }
                        
                        // 4. ì•„ì´í…œ ì‚­ì œ
                        log('4ï¸âƒ£ ì•„ì´í…œ ì‚­ì œ í…ŒìŠ¤íŠ¸...', 'info');
                        const deleteResult = await apiCall(`${config.baseUrl}/cart/items/${addResult.data.id}`, {
                            method: 'DELETE'
                        });
                        
                        if (deleteResult.ok || deleteResult.status === 204) {
                            log('âœ… ì•„ì´í…œ ì‚­ì œ ì„±ê³µ', 'success');
                            testsPassed++;
                        } else {
                            log(`âŒ ì•„ì´í…œ ì‚­ì œ ì‹¤íŒ¨: ${deleteResult.error}`, 'error');
                        }
                    }
                } else {
                    log(`âŒ ìƒí’ˆ ì¶”ê°€ ì‹¤íŒ¨: ${addResult.error}`, 'error');
                }
                
                // 5. ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
                log('5ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸° í…ŒìŠ¤íŠ¸...', 'info');
                const clearResult = await apiCall(`${config.baseUrl}/cart/${config.userId}/clear`, {
                    method: 'DELETE'
                });
                
                if (clearResult.ok || clearResult.status === 204) {
                    log('âœ… ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸° ì„±ê³µ', 'success');
                    testsPassed++;
                } else {
                    log(`âŒ ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸° ì‹¤íŒ¨: ${clearResult.error}`, 'error');
                }
                
                updateProgress((testsPassed / totalCartTests) * 40);
                
                if (testsPassed >= totalCartTests * 0.8) {
                    log(`ğŸ‰ ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! (${testsPassed}/${totalCartTests} ì„±ê³µ)`, 'success');
                    updateStatusCard('cartStatus', 'success', `${testsPassed}/${totalCartTests} ì„±ê³µ`);
                    return true;
                } else {
                    log(`âš ï¸ ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸ ë¶€ë¶„ ì„±ê³µ (${testsPassed}/${totalCartTests})`, 'warning');
                    updateStatusCard('cartStatus', 'warning', `${testsPassed}/${totalCartTests} ì„±ê³µ`);
                    return false;
                }
                
            } catch (error) {
                log(`âŒ ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`, 'error');
                updateStatusCard('cartStatus', 'error', 'í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨');
                return false;
            }
        }

        async function runWishlistTest() {
            log('â¤ï¸ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
            updateStatusCard('wishlistStatus', 'loading', 'í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...');
            
            const config = getTestConfig();
            let testsPassed = 0;
            const totalWishlistTests = 4;
            
            try {
                // 1. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
                log('1ï¸âƒ£ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì¡°íšŒ í…ŒìŠ¤íŠ¸...', 'info');
                const wishlistResult = await apiCall(`${config.baseUrl}/wishlist/${config.userId}`);
                
                if (wishlistResult.ok) {
                    log(`âœ… ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì¡°íšŒ ì„±ê³µ (${wishlistResult.data?.length || 0}ê°œ ì•„ì´í…œ)`, 'success');
                    testsPassed++;
                } else {
                    log(`âŒ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì¡°íšŒ ì‹¤íŒ¨: ${wishlistResult.error}`, 'error');
                }
                
                // 2. ìƒí’ˆ ì¶”ê°€
                log('2ï¸âƒ£ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì¶”ê°€ í…ŒìŠ¤íŠ¸...', 'info');
                const addResult = await apiCall(`${config.baseUrl}/wishlist/${config.userId}/items/${config.productIds[1]}`, {
                    method: 'POST'
                });
                
                if (addResult.ok || addResult.status === 201) {
                    log('âœ… ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì¶”ê°€ ì„±ê³µ', 'success');
                    testsPassed++;
                } else if (addResult.status === 409) {
                    log('âš ï¸ ì´ë¯¸ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ìƒí’ˆì…ë‹ˆë‹¤', 'warning');
                    testsPassed++;
                } else {
                    log(`âŒ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì¶”ê°€ ì‹¤íŒ¨: ${addResult.error}`, 'error');
                }
                
                // 3. ìƒí’ˆ ì¡´ì¬ í™•ì¸
                log('3ï¸âƒ£ ìƒí’ˆ ì¡´ì¬ í™•ì¸ í…ŒìŠ¤íŠ¸...', 'info');
                const checkResult = await apiCall(`${config.baseUrl}/wishlist/${config.userId}/check/${config.productIds[1]}`);
                
                if (checkResult.ok) {
                    log(`âœ… ìƒí’ˆ ì¡´ì¬ í™•ì¸ ì„±ê³µ (ì¡´ì¬: ${checkResult.data})`, 'success');
                    testsPassed++;
                } else {
                    log(`âŒ ìƒí’ˆ ì¡´ì¬ í™•ì¸ ì‹¤íŒ¨: ${checkResult.error}`, 'error');
                }
                
                // 4. ìƒí’ˆ ì œê±°
                log('4ï¸âƒ£ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì œê±° í…ŒìŠ¤íŠ¸...', 'info');
                const removeResult = await apiCall(`${config.baseUrl}/wishlist/${config.userId}/items/${config.productIds[1]}`, {
                    method: 'DELETE'
                });
                
                if (removeResult.ok || removeResult.status === 204) {
                    log('âœ… ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì œê±° ì„±ê³µ', 'success');
                    testsPassed++;
                } else {
                    log(`âŒ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì œê±° ì‹¤íŒ¨: ${removeResult.error}`, 'error');
                }
                
                updateProgress(70 + (testsPassed / totalWishlistTests) * 30);
                
                if (testsPassed >= totalWishlistTests * 0.75) {
                    log(`ğŸ‰ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! (${testsPassed}/${totalWishlistTests} ì„±ê³µ)`, 'success');
                    updateStatusCard('wishlistStatus', 'success', `${testsPassed}/${totalWishlistTests} ì„±ê³µ`);
                    return true;
                } else {
                    log(`âš ï¸ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸ ë¶€ë¶„ ì„±ê³µ (${testsPassed}/${totalWishlistTests})`, 'warning');
                    updateStatusCard('wishlistStatus', 'warning', `${testsPassed}/${totalWishlistTests} ì„±ê³µ`);
                    return false;
                }
                
            } catch (error) {
                log(`âŒ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`, 'error');
                updateStatusCard('wishlistStatus', 'error', 'í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨');
                return false;
            }
        }

        // ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        async function runFullTest() {
            log('ğŸš€ MyLittleShop ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸ ì‹œì‘!', 'info');
            log('=' .repeat(60), 'info');
            
            resetStatusCards();
            updateProgress(0);
            
            let allTestsPassed = true;
            
            // 1. ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸
            const serverOk = await runServerTest();
            allTestsPassed = allTestsPassed && serverOk;
            updateProgress(20);
            
            if (!serverOk) {
                log('âš ï¸ ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆì§€ë§Œ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤...', 'warning');
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // 2. ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸
            const cartOk = await runCartTest();
            allTestsPassed = allTestsPassed && cartOk;
            updateProgress(60);
            
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // 3. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸
            const wishlistOk = await runWishlistTest();
            allTestsPassed = allTestsPassed && wishlistOk;
            updateProgress(100);
            
            // ìµœì¢… ê²°ê³¼
            log('=' .repeat(60), 'info');
            if (allTestsPassed) {
                log('ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                log('âœ¨ MyLittleShop ì¥ë°”êµ¬ë‹ˆ & ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.', 'success');
            } else {
                log('âš ï¸ ì¼ë¶€ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¡œê·¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.', 'warning');
                
                const failedTests = [];
                if (!serverOk) failedTests.push('ì„œë²„ ì—°ê²°');
                if (!cartOk) failedTests.push('ì¥ë°”êµ¬ë‹ˆ');
                if (!wishlistOk) failedTests.push('ìœ„ì‹œë¦¬ìŠ¤íŠ¸');
                
                log(`âŒ ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸: ${failedTests.join(', ')}`, 'error');
            }
            
            log('ğŸ“Š í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì‹œê°„: ' + new Date().toLocaleString(), 'info');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸ’¡ MyLittleShop í†µí•© í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            log('ğŸ”§ ì„¤ì •ì„ í™•ì¸í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš”.', 'info');
            
            // ìë™ ì„œë²„ ì—°ê²° í™•ì¸
            setTimeout(async () => {
                log('ğŸ” ìë™ ì„œë²„ ì—°ê²° í™•ì¸ ì¤‘...', 'info');
                await runServerTest();
            }, 1000);
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        runFullTest();
                        break;
                    case 'r':
                        e.preventDefault();
                        runServerTest();
                        break;
                    case 'c':
                        e.preventDefault();
                        runCartTest();
                        break;
                    case 'w':
                        e.preventDefault();
                        runWishlistTest();
                        break;
                    case 'l':
                        e.preventDefault();
                        clearOutput();
                        break;
                }
            }
        });

        // ì¶”ê°€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function copyResultsToClipboard() {
            const output = document.getElementById('testOutput').textContent;
            navigator.clipboard.writeText(output).then(() => {
                log('ğŸ“‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }).catch(() => {
                log('âŒ í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            });
        }

        function exportResults() {
            const output = document.getElementById('testOutput').textContent;
            const blob = new Blob([output], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `mylittleshop-test-results-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            log('ğŸ’¾ í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ íŒŒì¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ì„±ëŠ¥ ì¸¡ì •
        let performanceData = {
            startTime: null,
            endTime: null,
            apiCalls: []
        };

        function startPerformanceMonitoring() {
            performanceData.startTime = performance.now();
            performanceData.apiCalls = [];
        }

        function recordApiCall(url, duration, success) {
            performanceData.apiCalls.push({
                url: url,
                duration: duration,
                success: success,
                timestamp: Date.now()
            });
        }

        function getPerformanceReport() {
            if (!performanceData.startTime) return;
            
            const totalDuration = performance.now() - performanceData.startTime;
            const successfulCalls = performanceData.apiCalls.filter(call => call.success).length;
            const averageResponseTime = performanceData.apiCalls.reduce((sum, call) => sum + call.duration, 0) / performanceData.apiCalls.length;
            
            log('ğŸ“ˆ ì„±ëŠ¥ ë¦¬í¬íŠ¸:', 'info');
            log(`â±ï¸ ì´ í…ŒìŠ¤íŠ¸ ì‹œê°„: ${Math.round(totalDuration)}ms`, 'info');
            log(`ğŸ“ API í˜¸ì¶œ ìˆ˜: ${performanceData.apiCalls.length}`, 'info');
            log(`âœ… ì„±ê³µë¥ : ${Math.round((successfulCalls / performanceData.apiCalls.length) * 100)}%`, 'info');
            log(`âš¡ í‰ê·  ì‘ë‹µ ì‹œê°„: ${Math.round(averageResponseTime)}ms`, 'info');
        }

        // ì‹¤ì‹œê°„ ìƒíƒœ ëª¨ë‹ˆí„°ë§
        function startStatusMonitoring() {
            setInterval(async () => {
                const config = getTestConfig();
                try {
                    const response = await fetch(`${config.baseUrl}/actuator/health`, {
                        signal: AbortSignal.timeout(2000)
                    });
                    
                    if (response.ok) {
                        const health = await response.json();
                        if (health.status === 'UP') {
                            updateStatusCard('serverStatus', 'success', 'ì •ìƒ ìš´ì˜ ì¤‘');
                        }
                    }
                } catch (error) {
                    // ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œë§Œ ìƒíƒœ ì—…ë°ì´íŠ¸
                    if (currentTestResults.server) {
                        updateStatusCard('serverStatus', 'error', 'ì—°ê²° ëŠê¹€');
                        log('âš ï¸ ì„œë²„ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.', 'warning');
                    }
                }
            }, 30000); // 30ì´ˆë§ˆë‹¤ í™•ì¸
        }

        // ëª¨ë‹ˆí„°ë§ ì‹œì‘
        startStatusMonitoring();
    </script>
</body>
</html>